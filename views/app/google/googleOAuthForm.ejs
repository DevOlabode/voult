<% layout('layout/boilerplate') %>

<% if(!app.googleOAuth.enabled){ %>
  <section class="card">
    <h2 class="text-white">Google OAuth Configuration</h2>
  
    <form action="/app/<%= app._id %>/google-oauth" method="POST" class="card app-form">
      
  <div class="form-group">
      <label class="text-light opacity-50">Google Client ID</label>
      <input
        type="text"
        name="clientId"
        required
        placeholder="xxxxxxxx.apps.googleusercontent.com"
      />
  </div>
  
  <div class="form-group">
      <label class="text-light opacity-50 form-label">Google Client Secret</label>
      <input
        type="password"
        name="clientSecret"
        required
      />
  </div>
  
  <div class="form-group">
      <label class="text-light opacity-50 form-label">Redirect URI</label>
      <input
        type="url"
        name="redirectUri"
        required
        placeholder="https://yourapp.com/auth/google/callback"
      />
  </div>
  
     <div class="form-actions">
      <button class="btn btn-secondary">Save Google OAuth</button>
     </div>
    </form>
  
    <p class="hint">
      This redirect URI must match what you configured in Google Cloud Console.
    </p>
  </section>
  <% }else{ %>
    <section class="card">
      <h2 class="text-white">Update Google OAuth</h2>
    
      <form action="/app/<%= app._id %>/update-google-oauth" method="POST" class="card app-form">
    
        <input type="hidden" name="enabled" value="true" />
    
        <div class="form-group">
          <label class="text-white opacity-50">Google Client ID</label>
          <input
            type="text"
            name="clientId"
            value="<%= app.googleOAuth?.clientId || '' %>"
            required
          />
        </div>
    
        <div class="form-group">
          <label class="text-white opacity-50">Google Client Secret</label>
          <input
            type="password"
            name="clientSecret"
            placeholder="••••••••••••"
          />
          <small class="text-white opacity-50">Leave empty to keep existing secret</small>
        </div>
    
        <div class="form-group">
          <label class="text-white opacity-50">Redirect URI</label>
          <input
            type="url"
            name="redirectUri"
            value="<%= app.googleOAuth?.redirectUri || '' %>"
            required
          />
        </div>
    
        <button class="btn btn-secondary">Save Google OAuth</button>
      </form>
    </section>
    
    <% } %>
