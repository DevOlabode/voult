<% layout('layout/boilerplate.ejs') %>

<section class="card">
  <h2 class="text-white">Facebook OAuth Configuration</h2>

  <form
    action="/app/<%= app._id %>/facebook-oauth"
    method="POST"
    class="card app-form"
  >

    <!-- Enable Facebook OAuth -->
    <div class="form-group">
      <label class="text-light opacity-50">
        Enable Facebook Login
      </label>

      <select name="enabled" required>
        <option value="true" <%= app.facebookOAuth?.enabled ? 'selected' : '' %>>
          Enabled
        </option>
        <option value="false" <%= !app.facebookOAuth?.enabled ? 'selected' : '' %>>
          Disabled
        </option>
      </select>
    </div>

    <!-- Facebook App ID -->
    <div class="form-group">
      <label class="text-light opacity-50">
        Facebook App ID
      </label>
      <input
        type="text"
        name="appId"
        required
        placeholder="123456789012345"
        value="<%= app.facebookOAuth?.appId || '' %>"
      />
    </div>

    <!-- Facebook App Secret -->
    <div class="form-group">
      <label class="text-light opacity-50">
        Facebook App Secret
      </label>
      <input
        type="password"
        name="appSecret"
        placeholder="Leave blank to keep existing secret"
      />
      <small class="text-muted">
        For security reasons, the current secret is never shown.
      </small>
    </div>

    <!-- Redirect URI -->
    <div class="form-group">
      <label class="text-light opacity-50">
        Redirect URI
      </label>
      <input
        type="url"
        name="redirectUri"
        required
        placeholder="https://yourapp.com/auth/facebook/callback"
        value="<%= app.facebookOAuth?.redirectUri || '' %>"
      />
    </div>

    <div class="form-actions">
      <button class="btn btn-secondary">
        Save Facebook OAuth
      </button>
    </div>

  </form>

  <p class="hint">
    This redirect URI must exactly match the one configured in the
    <strong>Facebook Developers Console</strong>.
  </p>
</section>